# Audio Transcriber API (Vosk + Flask)

## Описание API

### Эндпоинты:
1. **Синхронная транскрибация** (`POST /transcribe`)
   - Параметры:
     - `audio_url` (обязательный) - URL аудиофайла
     - `user_id` (обязательный) - ID пользователя
   - Ответ:
     ```json
     {
       "status": "success|error",
       "text": "Транскрибированный текст",
       "user_id": "id123",
       "id": "id операции",
       "time_start": 1713829200,
       "time_end": 1713829215,
       "is_full": true
     }
     ```

2. **Асинхронная транскрибация** (`POST /transcribeAsync`)
   - Параметры:
     - `audio_url` (обязательный)
     - `user_id` (обязательный)
     - `webhook_url` (обязательный)
   - Ответ:
     ```json
     {
       "status": "started",
       "id": "id операции",
       "time_start": 1713829200,
       "webhook_url": "https://your-webhook.url",
       "user_id": "id123"
     }
     ```

3. **Проверка здоровья** (`GET /health`)
   - Ответ:
     ```json
     {
       "status": "available|unavailable",
       "last_check": "2025-04-22T18:30:45",
       "active_tasks": 0
     }
     ```

## Оптимизации:
1. Использована облегченная модель Vosk (`vosk-model-small-ru-0.22`)
2. Оптимизирован процесс загрузки и распаковки модели
3. Улучшено управление памятью при обработке аудио
4. Добавлена очистка временных файлов
5. Ограничена максимальная длительность аудио (3 минуты)

## Статусные коды:
- 200 - Успешная транскрибация (полный текст)
- 201 - Успешная транскрибация (неполный текст)
- 202 - Задача принята в обработку (асинхронный режим)
- 400 - Ошибка в запросе
- 500 - Внутренняя ошибка сервера
- 503 - Сервер перегружен
